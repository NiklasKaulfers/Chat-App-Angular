<div class="card shadow-lg rounded-3">
  <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Chat Room: {{ room || 'Lobby' }}</h5>
  </div>

  <div class="card-body chat-box overflow-auto" #chatBox>
    <div *ngFor="let msg of messages" class="mb-3 d-flex" [ngClass]="{'justify-content-end': msg.sender === user, 'justify-content-start': msg.sender !== user}">
      <div class="p-3 rounded-3 text-white"
           [ngClass]="{'bg-primary': msg.sender === user, 'bg-secondary': msg.sender !== user, 'bg-dark': msg.sender === 'Server'}">
        <strong>{{ msg.sender }}:</strong> {{ msg.message }}
        <small *ngIf="msg.timestamp" class="d-block text-light opacity-75 text-end">{{ msg.timestamp | date:'shortTime' }}</small>
      </div>
    </div>
  </div>

  <div class="card-footer d-flex gap-2">
    <input type="text" class="form-control" placeholder="Type a message..." [(ngModel)]="userInput"
           (keyup.enter)="sendMessage()" (keyup)="onTyping(true)" (blur)="onTyping(false)">
    <button class="btn btn-primary" (click)="sendMessage()">
      <i class="bi bi-send"></i> Send
    </button>
  </div>
</div>

